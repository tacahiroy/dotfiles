<?xml version="1.0"?>
<root>
  <!-- Devices -->
  <devicevendordef>
    <vendorname>Topre_Corporation</vendorname>
    <vendorid>0x853</vendorid>
  </devicevendordef>

  <deviceproductdef>
    <productname>Realforce_87</productname>
    <productid>0x111</productid>
  </deviceproductdef>

  <deviceproductdef>
    <productname>Realforce_86</productname>
    <productid>0x10e</productid>
  </deviceproductdef>

  <devicevendordef>
    <vendorname>Apple_Inc</vendorname>
    <vendorid>0x5ac</vendorid>
  </devicevendordef>

  <deviceproductdef>
    <productname>Apple_Internal_keyboard_MBA</productname>
    <productid>0x24c</productid>
  </deviceproductdef>

  <deviceproductdef>
    <productname>Apple_Internal_keyboard_MBP</productname>
    <productid>0x245</productid>
  </deviceproductdef>

  <!-- apps -->
  <appdef>
    <appname>Terminal</appname>
    <equal>com.apple.Terminal</equal>
    <equal>iTerm</equal>
    <equal>com.googlecode.iterm2</equal>
  </appdef>

  <appdef>
    <appname>Eclipse</appname>
    <equal>org.eclipse.eclipse</equal>
  </appdef>

  <item>
    <name>Topre Realforce</name>
    <item>
      <name>Swap Options and Commands</name>
      <identifier>private.deviceproductdef.topre.swap_option_and_command</identifier>
      <device_only>DeviceVendor::Topre_Corporation</device_only>
      <autogen>--KeyToKey-- KeyCode::OPTION_L, KeyCode::COMMAND_L</autogen>
      <autogen>--KeyToKey-- KeyCode::COMMAND_L, KeyCode::OPTION_L</autogen>
      <autogen>--KeyToKey-- KeyCode::OPTION_R, KeyCode::COMMAND_R</autogen>
      <autogen>--KeyToKey-- KeyCode::COMMAND_R, KeyCode::OPTION_R</autogen>
    </item>

    <item>
      <name>Apply Volume Controls (87)</name>
      <identifier>private.deviceproductdef.topre.apply_volume_controls_realforce87</identifier>
      <device_only>DeviceVendor::Topre_Corporation, DeviceProduct::Realforce_87</device_only>
      <autogen>--KeyToConsumer-- KeyCode::F13, ConsumerKeyCode::VOLUME_MUTE</autogen>
      <autogen>--KeyToConsumer-- KeyCode::PC_KEYPAD_NUMLOCK, ConsumerKeyCode::VOLUME_DOWN</autogen>
      <autogen>--KeyToConsumer-- KeyCode::PC_PAUSE, ConsumerKeyCode::VOLUME_UP</autogen>
    </item>

    <item>
      <name>Apply Volume Controls (86)</name>
      <identifier>private.deviceproductdef.topre.apply_volume_controls_realforce86</identifier>
      <device_only>DeviceVendor::Topre_Corporation, DeviceProduct::Realforce_86</device_only>
      <autogen>--KeyToConsumer-- KeyCode::F13, ConsumerKeyCode::VOLUME_MUTE</autogen>
      <autogen>--KeyToConsumer-- KeyCode::PC_SCROLLLOCK, ConsumerKeyCode::VOLUME_DOWN</autogen>
      <autogen>--KeyToConsumer-- KeyCode::PC_PAUSE, ConsumerKeyCode::VOLUME_UP</autogen>
    </item>

    <item>
      <name>App to Option (86)</name>
      <identifier>private.deviceproductdef.topre.app_to_option_realforce86</identifier>
      <device_only>DeviceVendor::Topre_Corporation, DeviceProduct::Realforce_86</device_only>
      <autogen>--KeyToKey-- KeyCode::PC_APPLICATION, KeyCode::OPTION_R</autogen>
    </item>

    <item>
      <name>Home/End</name>
      <identifier>private.deviceproductdef.topre.home_end</identifier>
      <device_only>DeviceVendor::Topre_Corporation</device_only>
      <autogen>--KeyToKey-- KeyCode::HOME, KeyCode::CURSOR_LEFT, VK_COMMAND</autogen>
      <autogen>--KeyToKey-- KeyCode::END, KeyCode::CURSOR_RIGHT, VK_COMMAND</autogen>
    </item>
  </item>

  <item>
    <name>MacBook Pro/Air</name>
    <item>
      <name>Option_R to Control</name>
      <identifier>private.deviceproductdef.apple</identifier>
      <device_only>DeviceVendor::Apple_Inc, DeviceProduct::Apple_Internal_keyboard_MBA,
                   DeviceVendor::Apple_Inc, DeviceProduct::Apple_Internal_keyboard_MBP
      </device_only>
      <autogen>--KeyToKey-- KeyCode::OPTION_R, KeyCode::CONTROL_L</autogen>
    </item>
  </item>

  <!-- app specific -->
  <item>
    <name>App specific</name>
    <item>
      <name>Emulate MacUIM Vi co-operative mode</name>
      <identifier>private.appdef.iterm</identifier>
      <only>Terminal</only>
      <autogen>--KeyToKey--
        KeyCode::BRACKET_LEFT, ModifierFlag::CONTROL_L,
        KeyCode::ESCAPE
      </autogen>
    </item>

    <item>
      <name>Forward Delete</name>
      <identifier>private.appdef.eclipse</identifier>
      <only>Eclipse</only>
      <autogen>--KeyToKey--
        KeyCode::DELETE, VK_COMMAND,
        KeyCode::FORWARD_DELETE
      </autogen>
    </item>
  </item>
</root>

